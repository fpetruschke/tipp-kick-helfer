<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tipp-Kick-Helfer</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Symbols Outlined -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Vue Router -->
    <script src="https://unpkg.com/vue-router@4/dist/vue-router.global.js"></script>

    <!-- Howler.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>

    <style>
        :root {
            --tipp-kick-green: #2E7D32;
            --tipp-kick-light-green: #4CAF50;
            --tipp-kick-dark-green: #1B5E20;
        }

        body {
            background-color: #eee;
        }

        .bg-tipp-kick {
            background-color: var(--tipp-kick-green) !important;
        }

        .text-tipp-kick {
            color: var(--tipp-kick-green) !important;
        }

        .btn-tipp-kick {
            background-color: var(--tipp-kick-green);
            border-color: var(--tipp-kick-green);
            color: white;
        }

        .btn-tipp-kick:hover {
            background-color: var(--tipp-kick-dark-green);
            border-color: var(--tipp-kick-dark-green);
            color: white;
        }

        .btn-outline-tipp-kick {
            color: var(--tipp-kick-green);
            border-color: var(--tipp-kick-green);
            background-color: transparent;
        }

        .btn-outline-tipp-kick:hover {
            color: white;
            background-color: var(--tipp-kick-green);
            border-color: var(--tipp-kick-green);
        }

        /* Icon-Alignment-Fixes */
        .material-symbols-outlined {
            vertical-align: middle;
            line-height: 1;
        }

        .btn .material-symbols-outlined {
            vertical-align: middle;
            margin-top: -2px;
        }

        .navbar-brand .material-symbols-outlined {
            vertical-align: middle;
            margin-top: -1px;
        }

        .nav-link .material-symbols-outlined {
            vertical-align: middle;
            margin-top: -1px;
        }

        .card-game {
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card-game:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .game-timer {
            font-size: 3rem;
            font-weight: bold;
            color: var(--tipp-kick-green);
        }

        .team-display {
            border: 2px solid var(--tipp-kick-green);
            border-radius: 10px;
            padding: 1rem;
        }

        .ball-color-black {
            background-color: #000;
            color: white;
        }

        .ball-color-white {
            background-color: #fff;
            color: #000;
            border: 1px solid #ccc;
        }

        @media (orientation: landscape) {
            .landscape-only {
                display: block !important;
            }

            .portrait-only {
                display: block !important;
            }
        }

        @media (orientation: portrait) {
            .landscape-only {
                display: none !important;
            }

            .portrait-only {
                display: block !important;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <nav class="navbar navbar-expand-lg bg-tipp-kick navbar-dark">
            <div class="container-fluid">
                <router-link class="navbar-brand" to="/">
                    <span class="material-symbols-outlined me-2">sports_soccer</span>
                    Tipp-Kick-Helfer
                </router-link>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <router-link class="nav-link" to="/einstellungen">
                                <span class="material-symbols-outlined">settings</span>
                            </router-link>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <main class="container-fluid p-3">
            <router-view></router-view>
        </main>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Vue App
        const { createApp } = Vue;
        const { createRouter, createWebHistory } = VueRouter;

        // Startseite Komponente
        const Startseite = {
            template: `
                    <div class="portrait-only">
                        <div class="text-center mb-4">
                            <h1 class="display-4 text-tipp-kick mb-3">
                                <span class="material-symbols-outlined me-2">sports_soccer</span>
                                Tipp-Kick-Helfer
                            </h1>
                            <p class="lead">Dein digitaler Helfer für das Tischfußball-Spiel</p>
                        </div>

                        <div class="row g-4">
                            <div class="col-12 col-md-6">
                                <div class="card card-game h-100" @click="starteFreundschaftsspiel">
                                    <div class="card-body text-center">
                                        <span class="material-symbols-outlined display-1 text-tipp-kick mb-3">sports_soccer</span>
                                        <h3 class="card-title">Freundschaftsspiel</h3>
                                        <p class="card-text">Spiele gegen Freunde mit beliebigen Vereinen</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6">
                                <div class="card card-game h-100" @click="starteWM">
                                    <div class="card-body text-center">
                                        <span class="material-symbols-outlined display-1 text-tipp-kick mb-3">sports_soccer</span>
                                        <h3 class="card-title">WM</h3>
                                        <p class="card-text">Spiele mit Nationalmannschaften</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6">
                                <div class="card card-game h-100" @click="zeigeStatistik">
                                    <div class="card-body text-center">
                                        <span class="material-symbols-outlined display-1 text-tipp-kick mb-3">analytics</span>
                                        <h3 class="card-title">Globale Statistik</h3>
                                        <p class="card-text">Siehe deine Spielstatistiken</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6">
                                <div class="card card-game h-100" @click="zeigeRegeln">
                                    <div class="card-body text-center">
                                        <span class="material-symbols-outlined display-1 text-tipp-kick mb-3">menu_book</span>
                                        <h3 class="card-title">Regeln</h3>
                                        <p class="card-text">Lerne die TippKick Regeln</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6">
                                <div class="card card-game h-100" @click="zeigeEinstellungen">
                                    <div class="card-body text-center">
                                        <span class="material-symbols-outlined display-1 text-tipp-kick mb-3">settings</span>
                                        <h3 class="card-title">Einstellungen</h3>
                                        <p class="card-text">Verwalte deine App-Einstellungen</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
            methods: {
                starteFreundschaftsspiel() {
                    // Speichere Spieltyp im localStorage
                    localStorage.setItem('spielTyp', 'freundschaftsspiel');
                    this.$router.push('/spiel-einstellungen');
                },
                starteWM() {
                    // Speichere Spieltyp im localStorage
                    localStorage.setItem('spielTyp', 'wm');
                    this.$router.push('/spiel-einstellungen');
                },
                zeigeStatistik() {
                    this.$router.push('/statistik');
                },
                zeigeRegeln() {
                    this.$router.push('/regeln');
                },
                zeigeEinstellungen() {
                    this.$router.push('/einstellungen');
                }
            }
        };

        // Erweiterter Sound-Manager mit Fallback-System
        const SoundManager = {
            sounds: {},
            fallbacks: {},
            isInitialized: false,

            // Initialisiere Sounds mit Fallback-System
            init() {
                if (this.isInitialized) return;

                // Haupt-Sounds (externe URLs)
                this.sounds = {
                    torjubel: new Howl({
                        src: ['assets/audio/torjubel.mp3'],
                        volume: 0.5,
                        onloaderror: () => this.handleSoundError('torjubel')
                    }),
                    schiedsrichterPfeife: new Howl({
                        src: ['assets/audio/schiedsrichter-pfeife.mp3'],
                        volume: 0.7,
                        onloaderror: () => this.handleSoundError('schiedsrichterPfeife')
                    }),
                    stadionAtmosphaere: new Howl({
                        src: ['assets/audio/stadion-atmosphaere.mp3'],
                        volume: 0.3,
                        loop: true,
                        onloaderror: () => this.handleSoundError('stadionAtmosphaere')
                    })
                };

                // Fallback-Sounds (lokale WAV-Dateien)
                this.fallbacks = {
                    torjubel: new Howl({
                        src: ['assets/audio/torjubel-fallback.wav'],
                        volume: 0.3
                    }),
                    schiedsrichterPfeife: new Howl({
                        src: ['assets/audio/schiedsrichter-pfeife-fallback.wav'],
                        volume: 0.5
                    }),
                    stadionAtmosphaere: new Howl({
                        src: ['assets/audio/stadion-atmosphaere-fallback.wav'],
                        volume: 0.2,
                        loop: true
                    })
                };

                this.isInitialized = true;
            },

            // Behandle Sound-Lade-Fehler
            handleSoundError(soundName) {
                console.warn(`Sound ${soundName} konnte nicht geladen werden, verwende Fallback`);
                // Markiere Haupt-Sound als nicht verfügbar
                this.sounds[soundName] = null;
            },

            // Spiele Sound mit Fallback
            play(soundName) {
                try {
                    if (this.sounds[soundName] && this.sounds[soundName].state() === 'loaded') {
                        this.sounds[soundName].play();
                    } else if (this.fallbacks[soundName]) {
                        this.fallbacks[soundName].play();
                    } else {
                        console.warn(`Kein Sound verfügbar für: ${soundName}`);
                    }
                } catch (error) {
                    console.error(`Fehler beim Abspielen von ${soundName}:`, error);
                }
            },

            // Stoppe Sound
            stop(soundName) {
                try {
                    if (this.sounds[soundName] && this.sounds[soundName].playing()) {
                        this.sounds[soundName].stop();
                    }
                    if (this.fallbacks[soundName] && this.fallbacks[soundName].playing()) {
                        this.fallbacks[soundName].stop();
                    }
                } catch (error) {
                    console.error(`Fehler beim Stoppen von ${soundName}:`, error);
                }
            },

            // Prüfe ob Sound verfügbar ist
            isAvailable(soundName) {
                return (this.sounds[soundName] && this.sounds[soundName].state() === 'loaded') ||
                    (this.fallbacks[soundName] && this.fallbacks[soundName].state() === 'loaded');
            }
        };

        // App-Einstellungen Komponente
        const Einstellungen = {
            template: `
                    <div class="portrait-only">
                        <div class="text-center mb-4">
                            <h2 class="text-tipp-kick">App-Einstellungen</h2>
                        </div>

                        <!-- App-Menü -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <span class="material-symbols-outlined me-2">settings</span>
                                    App-Einstellungen
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="d-grid">
                                    <button 
                                        type="button" 
                                        class="btn btn-outline-danger"
                                        @click="zeigeLoeschenModal"
                                    >
                                        <span class="material-symbols-outlined me-2">delete_forever</span>
                                        Alle Daten löschen
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Zurück Button -->
                        <div class="d-grid">
                            <button type="button" class="btn btn-outline-secondary" @click="$router.push('/')">
                                <span class="material-symbols-outlined me-2">arrow_back</span>
                                Zurück
                            </button>
                        </div>

                            </div>
                        </div>

                        <!-- Löschen Modal -->
                        <div class="modal fade" id="loeschenModal" tabindex="-1">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title text-danger">
                                            <span class="material-symbols-outlined me-2">warning</span>
                                            Alle Daten löschen?
                                        </h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <p class="mb-0">
                                            <strong>Achtung!</strong> Diese Aktion löscht alle gespeicherten Daten unwiderruflich:
                                        </p>
                                        <ul class="mt-2 mb-0">
                                            <li>Alle Spielstatistiken</li>
                                            <li>Alle Spieleinstellungen</li>
                                            <li>Alle benutzerdefinierten Vereine</li>
                                        </ul>
                                        <p class="text-danger mt-3 mb-0">
                                            <strong>Diese Aktion kann nicht rückgängig gemacht werden!</strong>
                                        </p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                            Abbrechen
                                        </button>
                                        <button type="button" class="btn btn-danger" @click="alleDatenLoeschen">
                                            <span class="material-symbols-outlined me-2">delete_forever</span>
                                            Ja, alle Daten löschen
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                `,
            data() {
                return {
                    // Keine Daten mehr benötigt für App-Einstellungen
                }
            },

            methods: {
                zeigeLoeschenModal() {
                    const modal = new bootstrap.Modal(document.getElementById('loeschenModal'));
                    modal.show();
                },
                alleDatenLoeschen() {
                    // Lösche alle localStorage-Daten
                    localStorage.removeItem('spielEinstellungen');
                    localStorage.removeItem('spielStatistiken');
                    localStorage.removeItem('spielTyp');

                    // Schließe Modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('loeschenModal'));
                    modal.hide();

                    // Zeige Bestätigung
                    alert('Alle Daten wurden erfolgreich gelöscht!');

                    // Zurück zur Startseite
                    this.$router.push('/');
                }
            },
            mounted() {
                // Keine Initialisierung mehr benötigt für App-Einstellungen
            }
        };

        // Spieleinstellungen Komponente
        const Spieleinstellungen = {
            template: `
                    <div class="portrait-only">
                        <div class="text-center mb-4">
                            <h2 class="text-tipp-kick">Spieleinstellungen</h2>
                        </div>

                        <form @submit.prevent="speichereEinstellungen">
                            <!-- Halbzeitlänge -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="material-symbols-outlined me-2">timer</span>
                                        Halbzeitlänge
                                    </h5>
                                    <div class="row align-items-center">
                                        <div class="col-8">
                                            <input 
                                                type="range" 
                                                class="form-range" 
                                                min="0.5" 
                                                max="10" 
                                                step="0.5"
                                                v-model="halbzeitLaenge"
                                                @input="berechneSpielLaenge"
                                            >
                                            <div class="d-flex justify-content-between">
                                                <small>30 Sek</small>
                                                <small>{{ formatierteHalbzeitLaenge(halbzeitLaenge) }}</small>
                                                <small>10 Min</small>
                                            </div>
                                        </div>
                                        <div class="col-4 text-center">
                                            <div class="text-tipp-kick">
                                                <strong>{{ formatierteSpielLaenge(spielLaenge) }}</strong>
                                                <br><small>Gesamtspielzeit</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ballfarben -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="material-symbols-outlined me-2">sports_soccer</span>
                                        Ballfarben
                                    </h5>
                                    <div class="row">
                                        <div class="col-6">
                                            <label class="form-label">Team 1</label>
                                            <div class="mb-2">
                                                <select class="form-select mb-2" v-model="ballFarbenTyp.team1" @change="validiereBallFarben">
                                                    <option value="standard">Standard (Schwarz/Weiß)</option>
                                                    <option value="custom">Eigene Farbe</option>
                                                </select>
                                                <input 
                                                    v-if="ballFarbenTyp.team1 === 'custom'"
                                                    type="color" 
                                                    class="form-control form-control-color" 
                                                    v-model="ballFarben.team1"
                                                    @input="validiereBallFarben"
                                                    title="Wähle die Farbe für Team 1"
                                                >
                                                <select v-else class="form-select" v-model="ballFarben.team1" @change="validiereBallFarben">
                                                    <option value="schwarz">Schwarz</option>
                                                    <option value="weiß">Weiß</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label">Team 2</label>
                                            <div class="mb-2">
                                                <select class="form-select mb-2" v-model="ballFarbenTyp.team2" @change="validiereBallFarben">
                                                    <option value="standard">Standard (Schwarz/Weiß)</option>
                                                    <option value="custom">Eigene Farbe</option>
                                                </select>
                                                <input 
                                                    v-if="ballFarbenTyp.team2 === 'custom'"
                                                    type="color" 
                                                    class="form-control form-control-color" 
                                                    v-model="ballFarben.team2"
                                                    @input="validiereBallFarben"
                                                    title="Wähle die Farbe für Team 2"
                                                >
                                                <select v-else class="form-select" v-model="ballFarben.team2" @change="validiereBallFarben">
                                                    <option value="weiß">Weiß</option>
                                                    <option value="schwarz">Schwarz</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Fehlermeldung für Ballfarben -->
                                    <div v-if="ballFarbenFehler" class="alert alert-danger mt-2">
                                        <span class="material-symbols-outlined me-2">error</span>
                                        {{ ballFarbenFehler }}
                                    </div>
                                </div>
                            </div>

                            <!-- Spieler -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h5 class="card-title mb-0">
                                            <span class="material-symbols-outlined me-2">person</span>
                                            Spieler
                                        </h5>
                                        <button type="button" class="btn btn-sm btn-tipp-kick" @click="fuegeSpielerHinzu">
                                            <span class="material-symbols-outlined">add</span>
                                        </button>
                                    </div>
                                    
                                    <div v-for="(spielerItem, index) in spieler" :key="index" class="card mb-3">
                                        <div class="card-body">
                                            <div class="row align-items-center">
                                                <div class="col-4">
                                                    <input 
                                                        type="text" 
                                                        class="form-control" 
                                                        :placeholder="'Spieler ' + (index + 1)"
                                                        v-model="spielerItem.name"
                                                        maxlength="40"
                                                    >
                                                </div>
                                                <div class="col-5">
                                                    <button 
                                                        type="button" 
                                                        class="btn btn-outline-tipp-kick btn-sm w-100"
                                                        @click="waehleMannschaft(index)"
                                                    >
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <img 
                                                                v-if="spielerItem.mannschaftFlagge"
                                                                :src="spielerItem.mannschaftFlagge" 
                                                                :alt="spielerItem.mannschaft"
                                                                class="me-2"
                                                                style="max-height: 20px; max-width: 25px;"
                                                                @error="handleImageError"
                                                            >
                                                            <span v-if="!spielerItem.mannschaftLand" class="material-symbols-outlined me-1">flag</span>
                                                            <span class="text-truncate">
                                                                <span v-if="spielerItem.mannschaftLand" class="text-muted me-1">{{ spielerItem.mannschaftLand }}</span>
                                                                {{ spielerItem.mannschaft || 'Mannschaft wählen' }}
                                                            </span>
                                                        </div>
                                                    </button>
                                                </div>
                                                <div class="col-3 text-end">
                                                    <button 
                                                        type="button" 
                                                        class="btn btn-outline-danger btn-sm"
                                                        @click="entferneSpieler(index)"
                                                        title="Spieler entfernen"
                                                    >
                                                        <span class="material-symbols-outlined">delete</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Hintergrundgeräusch -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="material-symbols-outlined me-2">volume_up</span>
                                        Hintergrundgeräusch
                                    </h5>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" v-model="hintergrundGerauesch">
                                        <label class="form-check-label">Stadionatmosphäre abspielen</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Buttons -->
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-tipp-kick btn-lg">
                                    <span class="material-symbols-outlined me-2">play_arrow</span>
                                    Spiel starten
                                </button>
                                <button type="button" class="btn btn-outline-secondary" @click="$router.push('/')">
                                    <span class="material-symbols-outlined me-2">arrow_back</span>
                                    Zurück
                                </button>
                            </div>
                        </form>

                        <!-- Mannschaftsauswahl Modal -->
                        <div class="modal fade" id="mannschaftModal" tabindex="-1">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Mannschaft auswählen</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="mb-3">
                                            <input 
                                                type="text" 
                                                class="form-control" 
                                                placeholder="Mannschaft suchen..."
                                                v-model="mannschaftSuche"
                                            >
                                        </div>
                                        <div class="mb-3">
                                            <div class="row">
                                                <div class="col-8">
                                                    <input 
                                                        type="text" 
                                                        class="form-control" 
                                                        placeholder="Eigenen Verein eingeben..."
                                                        v-model="eigenerVerein"
                                                    >
                                                </div>
                                                <div class="col-4">
                                                    <input 
                                                        type="text" 
                                                        class="form-control" 
                                                        placeholder="Logo URL (optional)"
                                                        v-model="eigenerVereinLogo"
                                                    >
                                                </div>
                                            </div>
                                            <div class="mt-2">
                                                <button 
                                                    type="button" 
                                                    class="btn btn-sm btn-tipp-kick d-flex align-items-center"
                                                    @click="fuegeEigenenVereinHinzu"
                                                    :disabled="!eigenerVerein.trim()"
                                                >
                                                    <span class="material-symbols-outlined me-1">add</span>
                                                    Eigenen Verein hinzufügen
                                                </button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-6" v-for="mannschaft in gefilterteMannschaften" :key="mannschaft.name">
                                                <div 
                                                    class="card mb-2 cursor-pointer" 
                                                    @click="waehleMannschaftAus(mannschaft)"
                                                >
                                                    <div class="card-body text-center">
                                                        <div class="mb-2">
                                                            <img 
                                                                :src="mannschaft.flagge" 
                                                                :alt="mannschaft.name"
                                                                class="img-fluid"
                                                                style="max-height: 30px; max-width: 40px;"
                                                                @error="handleImageError"
                                                            >
                                                        </div>
                                                        <strong>{{ mannschaft.name }}</strong>
                                                        <br>
                                                        <small class="text-muted">{{ mannschaft.land }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
            data() {
                return {
                    halbzeitLaenge: 5,
                    spielLaenge: 10,
                    ballFarben: {
                        team1: 'schwarz',
                        team2: 'weiß'
                    },
                    ballFarbenTyp: {
                        team1: 'standard',
                        team2: 'standard'
                    },
                    ballFarbenFehler: '',
                    spieler: [
                        { name: '', mannschaft: '' }
                    ],
                    hintergrundGerauesch: false,
                    mannschaftSuche: '',
                    eigenerVerein: '',
                    eigenerVereinLogo: '',
                    aktuellerSpielerIndex: 0,
                    mannschaften: [
                        // Nationalmannschaften
                        {
                            name: 'Deutschland',
                            typ: 'national',
                            land: 'Deutschland',
                            flagge: 'assets/img/flaggen/deutschland.png'
                        },
                        {
                            name: 'Brasilien',
                            typ: 'national',
                            land: 'Brasilien',
                            flagge: 'assets/img/flaggen/brasilien.png'
                        },
                        {
                            name: 'Argentinien',
                            typ: 'national',
                            land: 'Argentinien',
                            flagge: 'assets/img/flaggen/argentinien.png'
                        },
                        {
                            name: 'Frankreich',
                            typ: 'national',
                            land: 'Frankreich',
                            flagge: 'assets/img/flaggen/frankreich.png'
                        },
                        {
                            name: 'Spanien',
                            typ: 'national',
                            land: 'Spanien',
                            flagge: 'assets/img/flaggen/spanien.png'
                        },
                        {
                            name: 'England',
                            typ: 'national',
                            land: 'England',
                            flagge: 'assets/img/flaggen/england.png'
                        },
                        {
                            name: 'Italien',
                            typ: 'national',
                            land: 'Italien',
                            flagge: 'assets/img/flaggen/italien.png'
                        },
                        {
                            name: 'Island',
                            typ: 'national',
                            land: 'Island',
                            flagge: 'assets/img/flaggen/island.png'
                        },
                        {
                            name: 'Irland',
                            typ: 'national',
                            land: 'Irland',
                            flagge: 'assets/img/flaggen/irland.png'
                        },
                        {
                            name: 'Niederlande',
                            typ: 'national',
                            land: 'Niederlande',
                            flagge: 'assets/img/flaggen/niederlande.png'
                        },
                        {
                            name: 'Portugal',
                            typ: 'national',
                            land: 'Portugal',
                            flagge: 'assets/img/flaggen/portugal.png'
                        },
                        {
                            name: 'Belgien',
                            typ: 'national',
                            land: 'Belgien',
                            flagge: 'assets/img/flaggen/belgien.png'
                        },
                        // Vereine (nur für Freundschaftsspiel)
                        {
                            name: 'Bayern München',
                            typ: 'verein',
                            land: 'Deutschland',
                            flagge: 'assets/img/logos/bayern-muenchen.png'
                        },
                        {
                            name: 'Borussia Dortmund',
                            typ: 'verein',
                            land: 'Deutschland',
                            flagge: 'assets/img/logos/borussia-dortmund.png'
                        },
                        {
                            name: 'Real Madrid',
                            typ: 'verein',
                            land: 'Spanien',
                            flagge: 'assets/img/logos/real-madrid.png'
                        },
                        {
                            name: 'Barcelona',
                            typ: 'verein',
                            land: 'Spanien',
                            flagge: 'assets/img/logos/barcelona.png'
                        },
                        {
                            name: 'Manchester United',
                            typ: 'verein',
                            land: 'England',
                            flagge: 'assets/img/logos/manchester-united.png'
                        },
                        {
                            name: 'Liverpool',
                            typ: 'verein',
                            land: 'England',
                            flagge: 'assets/img/logos/liverpool.png'
                        },
                        {
                            name: 'Paris Saint-Germain',
                            typ: 'verein',
                            land: 'Frankreich',
                            flagge: 'assets/img/logos/psg.png'
                        },
                        {
                            name: 'Juventus',
                            typ: 'verein',
                            land: 'Italien',
                            flagge: 'assets/img/logos/juventus.png'
                        },
                        {
                            name: 'AC Mailand',
                            typ: 'verein',
                            land: 'Italien',
                            flagge: 'assets/img/logos/ac-mailand.png'
                        },
                        {
                            name: 'Inter Mailand',
                            typ: 'verein',
                            land: 'Italien',
                            flagge: 'assets/img/logos/inter-mailand.png'
                        },
                        {
                            name: 'FC St. Pauli',
                            typ: 'verein',
                            land: 'Deutschland',
                            flagge: 'assets/img/logos/fc-st-pauli.png'
                        }
                    ]
                }
            },
            computed: {
                gefilterteMannschaften() {
                    const spielTyp = localStorage.getItem('spielTyp');
                    let mannschaften = this.mannschaften;

                    if (spielTyp === 'wm') {
                        mannschaften = mannschaften.filter(m => m.typ === 'national');
                    }

                    if (this.mannschaftSuche) {
                        mannschaften = mannschaften.filter(m =>
                            m.name.toLowerCase().includes(this.mannschaftSuche.toLowerCase())
                        );
                    }

                    return mannschaften;
                }
            },
            methods: {
                formatierteHalbzeitLaenge(laenge) {
                    if (laenge < 1) {
                        return `${Math.round(laenge * 60)} Sek`;
                    } else if (laenge === 1) {
                        return '1 Min';
                    } else {
                        return `${laenge} Min`;
                    }
                },
                formatierteSpielLaenge(laenge) {
                    if (laenge < 2) {
                        return `${Math.round(laenge * 60)} Sek`;
                    } else if (laenge === 2) {
                        return '2 Min';
                    } else {
                        return `${laenge} Min`;
                    }
                },
                berechneSpielLaenge() {
                    this.spielLaenge = this.halbzeitLaenge * 2;
                },
                fuegeSpielerHinzu() {
                    this.spieler.push({ name: '', mannschaft: '' });
                },
                entferneSpieler(index) {
                    if (this.spieler.length > 1) {
                        this.spieler.splice(index, 1);
                    }
                },
                waehleMannschaft(index) {
                    this.aktuellerSpielerIndex = index;
                    const modal = new bootstrap.Modal(document.getElementById('mannschaftModal'));
                    modal.show();
                },
                waehleMannschaftAus(mannschaft) {
                    this.spieler[this.aktuellerSpielerIndex].mannschaft = mannschaft.name;
                    this.spieler[this.aktuellerSpielerIndex].mannschaftLand = mannschaft.land;
                    this.spieler[this.aktuellerSpielerIndex].mannschaftFlagge = mannschaft.flagge;
                    const modal = bootstrap.Modal.getInstance(document.getElementById('mannschaftModal'));
                    modal.hide();
                },
                fuegeEigenenVereinHinzu() {
                    if (!this.eigenerVerein.trim()) return;

                    const neuerVerein = {
                        name: this.eigenerVerein.trim(),
                        typ: 'verein',
                        land: 'Benutzerdefiniert',
                        flagge: this.eigenerVereinLogo.trim() || 'assets/img/logos/default.png'
                    };

                    this.mannschaften.push(neuerVerein);
                    this.eigenerVerein = '';
                    this.eigenerVereinLogo = '';
                },
                handleImageError(event) {
                    // Fallback für fehlende Bilder
                    console.warn(`Bild konnte nicht geladen werden: ${event.target.src}`);

                    // Prüfe ob bereits das Fallback-Bild verwendet wird
                    if (event.target.src.includes('default.png')) {
                        // Verstecke das Bild komplett, wenn auch das Fallback fehlschlägt
                        event.target.style.display = 'none';
                        console.error('Auch Fallback-Bild konnte nicht geladen werden');
                    } else {
                        // Verwende Fallback-Bild
                        event.target.src = 'assets/img/logos/default.png';
                    }
                },
                validiereBallFarben() {
                    this.ballFarbenFehler = '';

                    // Wenn beide Standard-Farben verwenden
                    if (this.ballFarbenTyp.team1 === 'standard' && this.ballFarbenTyp.team2 === 'standard') {
                        // Automatisch unterschiedliche Farben setzen
                        if (this.ballFarben.team1 === 'schwarz') {
                            this.ballFarben.team2 = 'weiß';
                        } else if (this.ballFarben.team1 === 'weiß') {
                            this.ballFarben.team2 = 'schwarz';
                        }
                        return true;
                    }

                    // Wenn mindestens eine eigene Farbe verwendet wird
                    if (this.ballFarbenTyp.team1 === 'custom' || this.ballFarbenTyp.team2 === 'custom') {
                        const farbe1 = this.ballFarbenTyp.team1 === 'custom' ? this.ballFarben.team1 : this.getHexFarbe(this.ballFarben.team1);
                        const farbe2 = this.ballFarbenTyp.team2 === 'custom' ? this.ballFarben.team2 : this.getHexFarbe(this.ballFarben.team2);

                        // Normalisiere Hex-Codes (entferne # und konvertiere zu Kleinbuchstaben)
                        const normalisierteFarbe1 = farbe1.replace('#', '').toLowerCase();
                        const normalisierteFarbe2 = farbe2.replace('#', '').toLowerCase();

                        if (normalisierteFarbe1 === normalisierteFarbe2) {
                            this.ballFarbenFehler = 'Die beiden Spieler müssen unterschiedliche Ballfarben haben!';
                            return false;
                        }
                    }

                    return true;
                },
                getHexFarbe(standardFarbe) {
                    // Konvertiere Standard-Farben zu Hex-Codes
                    switch (standardFarbe) {
                        case 'schwarz':
                            return '#000000';
                        case 'weiß':
                            return '#ffffff';
                        default:
                            return standardFarbe; // Bereits ein Hex-Code
                    }
                },
                speichereEinstellungen() {
                    // Validiere Eingaben
                    if (this.spieler.length < 1) {
                        alert('Mindestens ein Spieler ist erforderlich!');
                        return;
                    }

                    const spielerOhneNamen = this.spieler.filter(s => !s.name.trim());
                    if (spielerOhneNamen.length > 0) {
                        alert('Alle Spieler müssen einen Namen haben!');
                        return;
                    }

                    const spielerOhneMannschaft = this.spieler.filter(s => !s.mannschaft.trim());
                    if (spielerOhneMannschaft.length > 0) {
                        alert('Alle Spieler müssen eine Mannschaft haben!');
                        return;
                    }

                    // Validiere Ballfarben
                    if (!this.validiereBallFarben()) {
                        alert(this.ballFarbenFehler);
                        return;
                    }

                    // Speichere Einstellungen
                    const einstellungen = {
                        halbzeitLaenge: this.halbzeitLaenge,
                        spielLaenge: this.spielLaenge,
                        ballFarben: this.ballFarben,
                        ballFarbenTyp: this.ballFarbenTyp,
                        spieler: this.spieler,
                        hintergrundGerauesch: this.hintergrundGerauesch,
                        spielTyp: localStorage.getItem('spielTyp')
                    };

                    localStorage.setItem('spielEinstellungen', JSON.stringify(einstellungen));

                    // Weiter zum Spiel
                    this.$router.push('/spiel');
                }
            },
            mounted() {
                // Lade gespeicherte Einstellungen
                const gespeicherteEinstellungen = localStorage.getItem('spielEinstellungen');
                if (gespeicherteEinstellungen) {
                    const einstellungen = JSON.parse(gespeicherteEinstellungen);
                    this.halbzeitLaenge = einstellungen.halbzeitLaenge || 5;
                    this.spielLaenge = einstellungen.spielLaenge || 10;
                    this.ballFarben = einstellungen.ballFarben || { team1: 'schwarz', team2: 'weiß' };
                    this.ballFarbenTyp = einstellungen.ballFarbenTyp || { team1: 'standard', team2: 'standard' };
                    this.spieler = einstellungen.spieler || [{ name: '', mannschaft: '' }];
                    this.hintergrundGerauesch = einstellungen.hintergrundGerauesch || false;
                }

                // Prüfe WM-Modus und leere nicht-Nationalmannschaften
                const spielTyp = localStorage.getItem('spielTyp');
                if (spielTyp === 'wm') {
                    this.spieler.forEach(spieler => {
                        if (spieler.mannschaft) {
                            const mannschaft = this.mannschaften.find(m => m.name === spieler.mannschaft);
                            if (mannschaft && mannschaft.typ !== 'national') {
                                spieler.mannschaft = '';
                                spieler.mannschaftLand = '';
                                spieler.mannschaftFlagge = '';
                            }
                        }
                    });
                }

                this.berechneSpielLaenge();

                // Initialisiere Ballfarben-Validierung
                this.validiereBallFarben();
            }
        };

        // Spiel Komponente
        const Spiel = {
            template: `
                    <div class="landscape-only">
                        <!-- Spiel-Interface -->
                        <div v-if="spielEinstellungen && !spielBeendet" class="text-center">
                            <!-- Timer -->
                            <div class="game-timer mb-4">
                                {{ formatierteZeit(verbleibendeZeit) }}
                            </div>

                            <!-- Teams -->
                            <div class="row">
                                <div class="col-6">
                                    <div class="team-display">
                                        <div class="text-center mb-3">
                                            <img 
                                                :src="aktuellesSpiel.team1.mannschaftFlagge || 'assets/img/logos/default.png'" 
                                                :alt="aktuellesSpiel.team1.mannschaft"
                                                class="img-fluid mb-2"
                                                style="max-height: 50px; max-width: 60px;"
                                                @error="handleImageError"
                                            >
                                            <h4>{{ aktuellesSpiel.team1.name }}</h4>
                                            <small class="text-muted">{{ aktuellesSpiel.team1.mannschaft }}</small>
                                        </div>
                                        <div class="mb-2">
                                            <span 
                                                class="badge" 
                                                :class="getBallColorClass('team1')"
                                                :style="getBallColorStyle('team1')"
                                            >
                                                {{ getBallColorText('team1') }}
                                            </span>
                                        </div>
                                        <div class="display-4 mb-3">{{ aktuellesSpiel.tore.team1 }}</div>
                                        <button 
                                            class="btn btn-tipp-kick btn-lg" 
                                            @click="torGeschossen('team1')"
                                        >
                                            <span class="material-symbols-outlined">sports_soccer</span>
                                            Tor!
                                        </button>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="team-display">
                                        <div class="text-center mb-3">
                                            <img 
                                                :src="aktuellesSpiel.team2.mannschaftFlagge || 'assets/img/logos/default.png'" 
                                                :alt="aktuellesSpiel.team2.mannschaft"
                                                class="img-fluid mb-2"
                                                style="max-height: 50px; max-width: 60px;"
                                                @error="handleImageError"
                                            >
                                            <h4>{{ aktuellesSpiel.team2.name }}</h4>
                                            <small class="text-muted">{{ aktuellesSpiel.team2.mannschaft }}</small>
                                        </div>
                                        <div class="mb-2">
                                            <span 
                                                class="badge" 
                                                :class="getBallColorClass('team2')"
                                                :style="getBallColorStyle('team2')"
                                            >
                                                {{ getBallColorText('team2') }}
                                            </span>
                                        </div>
                                        <div class="display-4 mb-3">{{ aktuellesSpiel.tore.team2 }}</div>
                                        <button 
                                            class="btn btn-tipp-kick btn-lg" 
                                            @click="torGeschossen('team2')"
                                        >
                                            <span class="material-symbols-outlined">sports_soccer</span>
                                            Tor!
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Abbrechen Button -->
                            <div class="mt-4">
                                <button class="btn btn-outline-danger" @click="spielAbbrechen">
                                    <span class="material-symbols-outlined me-2">stop</span>
                                    Spiel abbrechen
                                </button>
                            </div>
                        </div>

                        <!-- Spiel beendet -->
                        <div v-else-if="spielEinstellungen && spielBeendet" class="text-center">
                            <h2 class="text-tipp-kick mb-4">Spiel beendet!</h2>
                            <div class="row">
                                <div class="col-6">
                                    <h4>{{ aktuellesSpiel.team1.name }}</h4>
                                    <div class="display-4">{{ aktuellesSpiel.tore.team1 }}</div>
                                </div>
                                <div class="col-6">
                                    <h4>{{ aktuellesSpiel.team2.name }}</h4>
                                    <div class="display-4">{{ aktuellesSpiel.tore.team2 }}</div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <h3 v-if="aktuellesSpiel.tore.team1 > aktuellesSpiel.tore.team2">
                                    🏆 {{ aktuellesSpiel.team1.name }} gewinnt!
                                </h3>
                                <h3 v-else-if="aktuellesSpiel.tore.team2 > aktuellesSpiel.tore.team1">
                                    🏆 {{ aktuellesSpiel.team2.name }} gewinnt!
                                </h3>
                                <h3 v-else>
                                    🤝 Unentschieden!
                                </h3>
                            </div>
                            <div class="mt-4">
                                <button class="btn btn-tipp-kick" @click="spielBeenden">
                                    <span class="material-symbols-outlined me-2">check</span>
                                    Bestätigen
                                </button>
                            </div>
                        </div>
                        
                        <!-- Lade-Zustand -->
                        <div v-else class="text-center">
                            <div class="d-flex justify-content-center align-items-center" style="height: 100vh;">
                                <div>
                                    <div class="spinner-border text-tipp-kick" role="status">
                                        <span class="visually-hidden">Lade...</span>
                                    </div>
                                    <p class="mt-3">Spiel wird geladen...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Bereitschafts-Modal -->
                        <div class="modal fade" id="bereitschaftModal" tabindex="-1" data-bs-backdrop="static">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Spieler bereit?</h5>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-6">
                                                <h6>{{ aktuellesSpiel ? aktuellesSpiel.team1.name : '' }}</h6>
                                                <p>Tore: {{ aktuellesSpiel ? aktuellesSpiel.tore.team1 : 0 }}</p>
                                            </div>
                                            <div class="col-6">
                                                <h6>{{ aktuellesSpiel ? aktuellesSpiel.team2.name : '' }}</h6>
                                                <p>Tore: {{ aktuellesSpiel ? aktuellesSpiel.tore.team2 : 0 }}</p>
                                            </div>
                                        </div>
                                        <p class="mt-3">
                                            <strong>Spiel {{ aktuellesSpiel ? aktuellesSpiel.spielNummer : 1 }} von {{ gesamtSpiele }}</strong>
                                        </p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-tipp-kick" @click="spielStarten">
                                            <span class="material-symbols-outlined me-2">play_arrow</span>
                                            Bereit!
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Halbzeit-Modal -->
                        <div class="modal fade" id="halbzeitModal" tabindex="-1" data-bs-backdrop="static">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Halbzeit-Statistik</h5>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-6">
                                                <h6>{{ aktuellesSpiel ? aktuellesSpiel.team1.name : '' }}</h6>
                                                <ul class="list-unstyled">
                                                    <li v-for="tor in halbzeitTore.team1" :key="tor.zeit">
                                                        {{ tor.zeit }} - {{ tor.spieler }}
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="col-6">
                                                <h6>{{ aktuellesSpiel ? aktuellesSpiel.team2.name : '' }}</h6>
                                                <ul class="list-unstyled">
                                                    <li v-for="tor in halbzeitTore.team2" :key="tor.zeit">
                                                        {{ tor.zeit }} - {{ tor.spieler }}
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-tipp-kick" @click="halbzeitModalSchliessen">
                                            <span class="material-symbols-outlined me-2">arrow_forward</span>
                                            Weiter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Abbrechen-Confirm-Modal -->
                        <div class="modal fade" id="abbrechenModal" tabindex="-1">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Spiel abbrechen?</h5>
                                    </div>
                                    <div class="modal-body">
                                        <p>Willst Du wirklich abbrechen? Euer Fortschritt wird nicht gespeichert.</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                            Abbrechen
                                        </button>
                                        <button type="button" class="btn btn-danger" @click="spielWirklichAbbrechen">
                                            <span class="material-symbols-outlined me-2">stop</span>
                                            Ja, abbrechen
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
            data() {
                return {
                    spielEinstellungen: null,
                    turnierSpiele: [],
                    aktuellesSpiel: null,
                    aktuellerSpielIndex: 0,
                    verbleibendeZeit: 0,
                    spielBeendet: false,
                    halbzeitTore: { team1: [], team2: [] },
                    timer: null,
                    spielStartZeit: null
                }
            },
            computed: {
                gesamtSpiele() {
                    return this.turnierSpiele.length;
                },
                ballFarben() {
                    return this.spielEinstellungen && this.spielEinstellungen.ballFarben ? this.spielEinstellungen.ballFarben : { team1: 'schwarz', team2: 'weiß' };
                },
                ballFarbenTyp() {
                    return this.spielEinstellungen && this.spielEinstellungen.ballFarbenTyp ? this.spielEinstellungen.ballFarbenTyp : { team1: 'standard', team2: 'standard' };
                }
            },
            methods: {
                formatierteZeit(sekunden) {
                    const minuten = Math.floor(sekunden / 60);
                    const restSekunden = sekunden % 60;
                    return `${minuten}:${restSekunden.toString().padStart(2, '0')}`;
                },
                initialisiereTurnier() {
                    if (!this.spielEinstellungen || !this.spielEinstellungen.spieler) {
                        console.error('Keine Spieleinstellungen gefunden');
                        this.$router.push('/');
                        return;
                    }

                    const spieler = this.spielEinstellungen.spieler;

                    // Prüfe ob alle Spieler gültige Daten haben
                    const ungueltigeSpieler = spieler.filter(s => !s.name || !s.mannschaft);
                    if (ungueltigeSpieler.length > 0) {
                        console.error('Ungültige Spielerdaten gefunden');
                        this.$router.push('/');
                        return;
                    }

                    if (spieler.length === 2) {
                        // Direktes Spiel
                        this.turnierSpiele = [{
                            team1: spieler[0],
                            team2: spieler[1],
                            spielNummer: 1,
                            gesamtSpiele: 1
                        }];
                    } else {
                        // Turniermodus
                        this.erstelleTurnierSpiele(spieler);
                    }

                    this.starteNaechstesSpiel();
                },
                erstelleTurnierSpiele(spieler) {
                    const spiele = [];
                    let spielNummer = 1;

                    // Erstelle alle möglichen Paarungen
                    for (let i = 0; i < spieler.length; i++) {
                        for (let j = i + 1; j < spieler.length; j++) {
                            spiele.push({
                                team1: spieler[i],
                                team2: spieler[j],
                                spielNummer: spielNummer,
                                gesamtSpiele: spiele.length + 1
                            });
                            spielNummer++;
                        }
                    }

                    this.turnierSpiele = spiele;
                },
                starteNaechstesSpiel() {
                    if (!this.turnierSpiele || this.aktuellerSpielIndex >= this.turnierSpiele.length) {
                        // Turnier beendet
                        this.$router.push('/');
                        return;
                    }

                    const aktuellesSpiel = this.turnierSpiele[this.aktuellerSpielIndex];
                    if (!aktuellesSpiel || !aktuellesSpiel.team1 || !aktuellesSpiel.team2) {
                        console.error('Ungültige Spieldaten gefunden');
                        this.$router.push('/');
                        return;
                    }

                    this.aktuellesSpiel = {
                        ...aktuellesSpiel,
                        tore: { team1: 0, team2: 0 },
                        halbzeit: 1,
                        halbzeitTore: { team1: [], team2: [] }
                    };

                    const halbzeitLaenge = this.spielEinstellungen ? this.spielEinstellungen.halbzeitLaenge : 5;
                    this.verbleibendeZeit = halbzeitLaenge * 60;
                    this.spielBeendet = false;
                    this.halbzeitTore = { team1: [], team2: [] };

                    // Warte kurz, bis das Template gerendert ist, dann zeige Modal
                    this.$nextTick(() => {
                        const modalElement = document.getElementById('bereitschaftModal');
                        if (modalElement) {
                            const modal = new bootstrap.Modal(modalElement);
                            modal.show();
                        } else {
                            console.error('Bereitschafts-Modal nicht gefunden');
                        }
                    });
                },
                spielStarten() {
                    // Schließe Modal
                    const modalElement = document.getElementById('bereitschaftModal');
                    if (modalElement) {
                        const modal = bootstrap.Modal.getInstance(modalElement);
                        if (modal) {
                            modal.hide();
                        }
                    }

                    // Starte Timer
                    this.spielStartZeit = Date.now();
                    this.timer = setInterval(() => {
                        this.verbleibendeZeit--;

                        if (this.verbleibendeZeit <= 0) {
                            this.halbzeitBeenden();
                        }
                    }, 1000);

                    // Spiele Schiedsrichter-Pfeife
                    SoundManager.play('schiedsrichterPfeife');

                    // Starte Hintergrundgeräusch
                    if (this.spielEinstellungen && this.spielEinstellungen.hintergrundGerauesch) {
                        SoundManager.play('stadionAtmosphaere');
                    }
                },
                torGeschossen(team) {
                    const spielzeit = Math.floor((Date.now() - this.spielStartZeit) / 1000);
                    const halbzeitLaenge = this.spielEinstellungen ? this.spielEinstellungen.halbzeitLaenge : 5;
                    const zeitString = this.formatierteZeit(halbzeitLaenge * 60 - spielzeit);

                    this.aktuellesSpiel.tore[team]++;
                    this.halbzeitTore[team].push({
                        zeit: zeitString,
                        spieler: this.aktuellesSpiel[team].name
                    });

                    // Spiele Torjubel
                    SoundManager.play('torjubel');
                },
                halbzeitBeenden() {
                    // Stoppe Timer
                    if (this.timer) {
                        clearInterval(this.timer);
                        this.timer = null;
                    }

                    // Spiele Schiedsrichter-Pfeife
                    SoundManager.play('schiedsrichterPfeife');

                    if (this.aktuellesSpiel.halbzeit === 1) {
                        // Erste Halbzeit beendet
                        this.aktuellesSpiel.halbzeit = 2;
                        const halbzeitLaenge = this.spielEinstellungen ? this.spielEinstellungen.halbzeitLaenge : 5;
                        this.verbleibendeZeit = halbzeitLaenge * 60;

                        // Zeige Halbzeit-Modal
                        this.$nextTick(() => {
                            const modalElement = document.getElementById('halbzeitModal');
                            if (modalElement) {
                                const modal = new bootstrap.Modal(modalElement);
                                modal.show();
                            } else {
                                console.error('Halbzeit-Modal nicht gefunden');
                            }
                        });
                    } else {
                        // Zweite Halbzeit beendet
                        this.spielBeendet = true;
                    }
                },
                halbzeitModalSchliessen() {
                    // Schließe Halbzeit-Modal
                    const modalElement = document.getElementById('halbzeitModal');
                    if (modalElement) {
                        const modal = bootstrap.Modal.getInstance(modalElement);
                        if (modal) {
                            modal.hide();
                        }
                    }

                    // Starte zweite Halbzeit
                    this.spielStartZeit = Date.now();
                    this.timer = setInterval(() => {
                        this.verbleibendeZeit--;

                        if (this.verbleibendeZeit <= 0) {
                            this.halbzeitBeenden();
                        }
                    }, 1000);

                    // Spiele Schiedsrichter-Pfeife
                    SoundManager.play('schiedsrichterPfeife');
                },
                spielAbbrechen() {
                    this.$nextTick(() => {
                        const modalElement = document.getElementById('abbrechenModal');
                        if (modalElement) {
                            const modal = new bootstrap.Modal(modalElement);
                            modal.show();
                        } else {
                            console.error('Abbrechen-Modal nicht gefunden');
                        }
                    });
                },
                spielWirklichAbbrechen() {
                    // Stoppe Timer und Sounds
                    if (this.timer) {
                        clearInterval(this.timer);
                    }
                    SoundManager.stop('stadionAtmosphaere');

                    // Schließe Modal
                    const modalElement = document.getElementById('abbrechenModal');
                    if (modalElement) {
                        const modal = bootstrap.Modal.getInstance(modalElement);
                        if (modal) {
                            modal.hide();
                        }
                    }

                    // Zurück zur Startseite
                    this.$router.push('/');
                },
                spielBeenden() {
                    // Speichere Spielergebnis
                    this.speichereSpielergebnis();

                    // Nächstes Spiel
                    this.aktuellerSpielIndex++;
                    this.starteNaechstesSpiel();
                },
                speichereSpielergebnis() {
                    const spielergebnis = {
                        datum: new Date().toISOString(),
                        spielTyp: this.spielEinstellungen ? this.spielEinstellungen.spielTyp : 'freundschaftsspiel',
                        halbzeitLaenge: this.spielEinstellungen ? this.spielEinstellungen.halbzeitLaenge : 5,
                        team1: {
                            name: this.aktuellesSpiel.team1.name,
                            mannschaft: this.aktuellesSpiel.team1.mannschaft,
                            mannschaftLand: this.aktuellesSpiel.team1.mannschaftLand,
                            mannschaftFlagge: this.aktuellesSpiel.team1.mannschaftFlagge,
                            tore: this.aktuellesSpiel.tore.team1
                        },
                        team2: {
                            name: this.aktuellesSpiel.team2.name,
                            mannschaft: this.aktuellesSpiel.team2.mannschaft,
                            mannschaftLand: this.aktuellesSpiel.team2.mannschaftLand,
                            mannschaftFlagge: this.aktuellesSpiel.team2.mannschaftFlagge,
                            tore: this.aktuellesSpiel.tore.team2
                        },
                        halbzeitTore: this.halbzeitTore
                    };

                    // Lade bestehende Statistiken
                    let statistiken = JSON.parse(localStorage.getItem('spielStatistiken') || '[]');
                    statistiken.push(spielergebnis);
                    localStorage.setItem('spielStatistiken', JSON.stringify(statistiken));
                },
                handleImageError(event) {
                    // Fallback für fehlende Bilder
                    console.warn(`Bild konnte nicht geladen werden: ${event.target.src}`);

                    // Prüfe ob bereits das Fallback-Bild verwendet wird
                    if (event.target.src.includes('default.png')) {
                        // Verstecke das Bild komplett, wenn auch das Fallback fehlschlägt
                        event.target.style.display = 'none';
                        console.error('Auch Fallback-Bild konnte nicht geladen werden');
                    } else {
                        // Verwende Fallback-Bild
                        event.target.src = 'assets/img/logos/default.png';
                    }
                },
                getBallColorClass(team) {
                    if (this.ballFarbenTyp[team] === 'custom') {
                        return '';
                    }
                    return this.ballFarben[team] === 'schwarz' ? 'ball-color-black' : 'ball-color-white';
                },
                getBallColorStyle(team) {
                    if (this.ballFarbenTyp[team] === 'custom') {
                        return {
                            backgroundColor: this.ballFarben[team],
                            color: this.getContrastColor(this.ballFarben[team]),
                            border: '1px solid #ccc'
                        };
                    }
                    return {};
                },
                getBallColorText(team) {
                    if (this.ballFarbenTyp[team] === 'custom') {
                        return 'Custom';
                    }
                    return this.ballFarben[team];
                },
                getContrastColor(hexColor) {
                    // Einfache Kontrastberechnung für bessere Lesbarkeit
                    const hex = hexColor.replace('#', '');
                    const r = parseInt(hex.substr(0, 2), 16);
                    const g = parseInt(hex.substr(2, 2), 16);
                    const b = parseInt(hex.substr(4, 2), 16);
                    const brightness = (r * 299 + g * 587 + b * 114) / 1000;
                    return brightness > 128 ? '#000' : '#fff';
                }
            },
            mounted() {
                // Lade Spiel-Einstellungen
                const einstellungen = localStorage.getItem('spielEinstellungen');
                if (!einstellungen) {
                    this.$router.push('/');
                    return;
                }

                try {
                    this.spielEinstellungen = JSON.parse(einstellungen);

                    // Prüfe ob alle erforderlichen Daten vorhanden sind
                    if (!this.spielEinstellungen || !this.spielEinstellungen.spieler || this.spielEinstellungen.spieler.length === 0) {
                        console.error('Ungültige Spieleinstellungen gefunden');
                        this.$router.push('/');
                        return;
                    }

                    this.initialisiereTurnier();
                } catch (error) {
                    console.error('Fehler beim Laden der Spieleinstellungen:', error);
                    this.$router.push('/');
                }
            },
            beforeUnmount() {
                // Cleanup
                if (this.timer) {
                    clearInterval(this.timer);
                }
                SoundManager.stop('stadionAtmosphaere');
            }
        };

        // Globale Statistik Komponente
        const GlobaleStatistik = {
            template: `
                    <div class="portrait-only">
                        <div class="text-center mb-4">
                            <h2 class="text-tipp-kick">
                                <span class="material-symbols-outlined me-2">analytics</span>
                                Globale Statistik
                            </h2>
                        </div>

                        <div v-if="spielerStatistiken.length === 0" class="text-center">
                            <div class="card">
                                <div class="card-body">
                                    <span class="material-symbols-outlined display-1 text-muted mb-3">analytics_off</span>
                                    <h5>Keine Statistiken vorhanden</h5>
                                    <p class="text-muted">Spiele ein paar Spiele, um Statistiken zu sehen!</p>
                                    <button class="btn btn-tipp-kick" @click="$router.push('/')">
                                        <span class="material-symbols-outlined me-2">play_arrow</span>
                                        Spiel starten
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div v-else>
                            <!-- Filter -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-6">
                                            <label class="form-label">Spieltyp</label>
                                            <select class="form-select" v-model="filter.spielTyp">
                                                <option value="">Alle</option>
                                                <option value="freundschaftsspiel">Freundschaftsspiel</option>
                                                <option value="wm">WM</option>
                                            </select>
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label">Zeitraum</label>
                                            <select class="form-select" v-model="filter.zeitraum">
                                                <option value="">Alle</option>
                                                <option value="7">Letzte 7 Tage</option>
                                                <option value="30">Letzte 30 Tage</option>
                                                <option value="90">Letzte 90 Tage</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Spieler-Statistiken -->
                            <div class="card mb-4" v-for="statistik in gefilterteStatistiken" :key="statistik.spielerName">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <span class="material-symbols-outlined me-2">person</span>
                                        {{ statistik.spielerName }}
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-6">
                                            <h6>Mannschaften</h6>
                                            <ul class="list-unstyled">
                                                <li v-for="mannschaft in statistik.mannschaften" :key="mannschaft.name" class="mb-2">
                                                    <div class="d-flex align-items-center">
                                                        <img 
                                                            :src="mannschaft.flagge || 'assets/img/logos/default.png'" 
                                                            :alt="mannschaft.name"
                                                            class="me-2"
                                                            style="max-height: 20px; max-width: 25px;"
                                                            @error="handleImageError"
                                                        >
                                                        <div>
                                                            <strong>{{ mannschaft.name }}</strong>
                                                            <br>
                                                            <small class="text-muted">
                                                                {{ mannschaft.spiele }} Spiele, {{ mannschaft.tore }} Tore
                                                            </small>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-6">
                                            <h6>Gesamtstatistik</h6>
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="text-tipp-kick">
                                                        <strong>{{ statistik.gesamtSpiele }}</strong>
                                                        <br><small>Spiele</small>
                                                    </div>
                                                </div>
                                                <div class="col-4">
                                                    <div class="text-tipp-kick">
                                                        <strong>{{ statistik.gesamtTore }}</strong>
                                                        <br><small>Tore</small>
                                                    </div>
                                                </div>
                                                <div class="col-4">
                                                    <div class="text-tipp-kick">
                                                        <strong>{{ statistik.durchschnittTore }}</strong>
                                                        <br><small>Tore/Spiel</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Detaillierte Spiele -->
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <span class="material-symbols-outlined me-2">list</span>
                                        Detaillierte Spiele
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th>Datum</th>
                                                    <th>Spieltyp</th>
                                                    <th>Spieler</th>
                                                    <th>Mannschaft</th>
                                                    <th>Tore</th>
                                                    <th>Gegner</th>
                                                    <th>Ergebnis</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="spiel in gefilterteSpiele" :key="spiel.datum">
                                                    <td>{{ formatiereDatum(spiel.datum) }}</td>
                                                    <td>
                                                        <span class="badge" :class="spiel.spielTyp === 'wm' ? 'bg-primary' : 'bg-secondary'">
                                                            {{ spiel.spielTyp === 'wm' ? 'WM' : 'Freundschaft' }}
                                                        </span>
                                                    </td>
                                                    <td>{{ spiel.spielerName }}</td>
                                                    <td>{{ spiel.mannschaft }}</td>
                                                    <td>{{ spiel.tore }}</td>
                                                    <td>{{ spiel.gegner }}</td>
                                                    <td>
                                                        <span v-if="spiel.gewonnen" class="text-success">🏆 Gewonnen</span>
                                                        <span v-else-if="spiel.verloren" class="text-danger">❌ Verloren</span>
                                                        <span v-else class="text-warning">🤝 Unentschieden</span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Reset Button -->
                            <div class="mt-4">
                                <button class="btn btn-outline-danger" @click="statistikenZuruecksetzen">
                                    <span class="material-symbols-outlined me-2">delete_forever</span>
                                    Alle Statistiken löschen
                                </button>
                            </div>
                        </div>
                    </div>
                `,
            data() {
                return {
                    filter: {
                        spielTyp: '',
                        zeitraum: ''
                    },
                    spielerStatistiken: [],
                    detaillierteSpiele: []
                }
            },
            computed: {
                gefilterteStatistiken() {
                    return this.spielerStatistiken;
                },
                gefilterteSpiele() {
                    let spiele = this.detaillierteSpiele;

                    if (this.filter.spielTyp) {
                        spiele = spiele.filter(s => s.spielTyp === this.filter.spielTyp);
                    }

                    if (this.filter.zeitraum) {
                        const tage = parseInt(this.filter.zeitraum);
                        const grenze = new Date();
                        grenze.setDate(grenze.getDate() - tage);
                        spiele = spiele.filter(s => new Date(s.datum) >= grenze);
                    }

                    return spiele.sort((a, b) => new Date(b.datum) - new Date(a.datum));
                }
            },
            methods: {
                formatiereDatum(datumString) {
                    const datum = new Date(datumString);
                    return datum.toLocaleDateString('de-DE', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                },
                ladeStatistiken() {
                    const statistiken = JSON.parse(localStorage.getItem('spielStatistiken') || '[]');
                    this.verarbeiteStatistiken(statistiken);
                },
                verarbeiteStatistiken(statistiken) {
                    const spielerMap = new Map();
                    const spiele = [];

                    statistiken.forEach(spiel => {
                        // Team 1 verarbeiten
                        this.verarbeiteSpieler(spiel.team1, spiel, spielerMap, spiele, spiel.team2);
                        // Team 2 verarbeiten
                        this.verarbeiteSpieler(spiel.team2, spiel, spielerMap, spiele, spiel.team1);
                    });

                    this.spielerStatistiken = Array.from(spielerMap.values()).map(statistik => ({
                        ...statistik,
                        mannschaften: Array.from(statistik.mannschaften.values()),
                        durchschnittTore: (statistik.gesamtTore / statistik.gesamtSpiele).toFixed(1)
                    }));
                    this.detaillierteSpiele = spiele;
                },
                verarbeiteSpieler(team, spiel, spielerMap, spiele, gegner) {
                    const spielerName = team.name;
                    const mannschaft = team.mannschaft;
                    const tore = team.tore;

                    // Spieler-Statistik aktualisieren
                    if (!spielerMap.has(spielerName)) {
                        spielerMap.set(spielerName, {
                            spielerName,
                            mannschaften: new Map(),
                            gesamtSpiele: 0,
                            gesamtTore: 0
                        });
                    }

                    const spielerStatistik = spielerMap.get(spielerName);
                    spielerStatistik.gesamtSpiele++;
                    spielerStatistik.gesamtTore += tore;

                    // Mannschaft-Statistik aktualisieren
                    if (!spielerStatistik.mannschaften.has(mannschaft)) {
                        spielerStatistik.mannschaften.set(mannschaft, {
                            name: mannschaft,
                            land: spiel[`team${spiel.team1.name === spielerName ? '1' : '2'}`].mannschaftLand || 'Unbekannt',
                            flagge: spiel[`team${spiel.team1.name === spielerName ? '1' : '2'}`].mannschaftFlagge || 'assets/img/logos/default.png',
                            spiele: 0,
                            tore: 0
                        });
                    }

                    const mannschaftStatistik = spielerStatistik.mannschaften.get(mannschaft);
                    mannschaftStatistik.spiele++;
                    mannschaftStatistik.tore += tore;

                    // Detailliertes Spiel hinzufügen
                    spiele.push({
                        datum: spiel.datum,
                        spielTyp: spiel.spielTyp,
                        spielerName,
                        mannschaft,
                        mannschaftLand: spiel[`team${spiel.team1.name === spielerName ? '1' : '2'}`].mannschaftLand,
                        mannschaftFlagge: spiel[`team${spiel.team1.name === spielerName ? '1' : '2'}`].mannschaftFlagge,
                        tore,
                        gegner: gegner.name,
                        gewonnen: tore > gegner.tore,
                        verloren: tore < gegner.tore
                    });
                },
                statistikenZuruecksetzen() {
                    if (confirm('Möchtest Du wirklich alle Statistiken löschen? Diese Aktion kann nicht rückgängig gemacht werden.')) {
                        localStorage.removeItem('spielStatistiken');
                        this.spielerStatistiken = [];
                        this.detaillierteSpiele = [];
                    }
                },
                handleImageError(event) {
                    // Fallback für fehlende Bilder
                    console.warn(`Bild konnte nicht geladen werden: ${event.target.src}`);

                    // Prüfe ob bereits das Fallback-Bild verwendet wird
                    if (event.target.src.includes('default.png')) {
                        // Verstecke das Bild komplett, wenn auch das Fallback fehlschlägt
                        event.target.style.display = 'none';
                        console.error('Auch Fallback-Bild konnte nicht geladen werden');
                    } else {
                        // Verwende Fallback-Bild
                        event.target.src = 'assets/img/logos/default.png';
                    }
                }
            },
            mounted() {
                this.ladeStatistiken();
            }
        };

        // Regeln Komponente
        const Regeln = {
            template: `
                    <div class="portrait-only">
                        <div class="text-center mb-4">
                            <h2 class="text-tipp-kick">
                                <span class="material-symbols-outlined me-2">rule</span>
                                TippKick Regeln
                            </h2>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <span class="material-symbols-outlined me-2">sports_soccer</span>
                                            Grundregeln
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• TippKick ist ein Tischfußball-Spiel mit einem kleinen Ball</li>
                                            <li class="mb-2">• Das Spiel wird in zwei Halbzeiten gespielt</li>
                                            <li class="mb-2">• Jeder Spieler steuert eine Mannschaft</li>
                                            <li class="mb-2">• Der Ball wird durch Antippen der Stangen bewegt</li>
                                            <li class="mb-2">• Ein Tor ist gültig, wenn der Ball ins gegnerische Tor rollt</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <span class="material-symbols-outlined me-2">timer</span>
                                            Spielzeit
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• Die Halbzeitlänge kann zwischen 1-10 Minuten gewählt werden</li>
                                            <li class="mb-2">• Nach der ersten Halbzeit gibt es eine kurze Pause</li>
                                            <li class="mb-2">• Nach der zweiten Halbzeit ist das Spiel beendet</li>
                                            <li class="mb-2">• Bei Unentschieden nach regulärer Zeit endet das Spiel unentschieden</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <span class="material-symbols-outlined me-2">groups</span>
                                            Spielmodi
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <h6>Freundschaftsspiel</h6>
                                        <ul class="list-unstyled mb-3">
                                            <li class="mb-2">• Spieler können beliebige Vereine oder Nationalmannschaften wählen</li>
                                            <li class="mb-2">• Ideal für 2-4 Spieler</li>
                                            <li class="mb-2">• Bei mehr als 2 Spielern wird automatisch ein Turnier gespielt</li>
                                        </ul>
                                        
                                        <h6>WM-Modus</h6>
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• Nur Nationalmannschaften sind erlaubt</li>
                                            <li class="mb-2">• Simuliert eine Weltmeisterschaft</li>
                                            <li class="mb-2">• Bei mehr als 2 Spielern wird ein Turnier gespielt</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <span class="material-symbols-outlined me-2">emoji_events</span>
                                            Turniermodus
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• Wird automatisch aktiviert bei 3+ Spielern</li>
                                            <li class="mb-2">• Jeder Spieler spielt gegen jeden anderen</li>
                                            <li class="mb-2">• Die Spiele werden nacheinander abgehalten</li>
                                            <li class="mb-2">• Am Ende gibt es einen Gesamtsieger</li>
                                            <li class="mb-2">• Alle Ergebnisse werden in der Statistik gespeichert</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <span class="material-symbols-outlined me-2">volume_up</span>
                                            Sound-Features
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• Schiedsrichter-Pfeife bei Spielbeginn und Halbzeitende</li>
                                            <li class="mb-2">• Torjubel bei jedem Tor</li>
                                            <li class="mb-2">• Optionale Stadionatmosphäre als Hintergrundgeräusch</li>
                                            <li class="mb-2">• Alle Sounds können in den Einstellungen konfiguriert werden</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <span class="material-symbols-outlined me-2">tips_and_updates</span>
                                            Tipps für besseres Spiel
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            <li class="mb-2">• Übe das Antippen der Stangen für präzise Schüsse</li>
                                            <li class="mb-2">• Verteidige dein Tor aktiv</li>
                                            <li class="mb-2">• Nutze verschiedene Schusstechniken</li>
                                            <li class="mb-2">• Kommuniziere mit deinem Mitspieler</li>
                                            <li class="mb-2">• Halte die Spielfläche sauber für optimales Ballverhalten</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-tipp-kick" @click="$router.push('/')">
                                <span class="material-symbols-outlined me-2">play_arrow</span>
                                Jetzt spielen!
                            </button>
                        </div>
                    </div>
                `
        };

        // Router-Konfiguration
        const routes = [
            { path: '/', component: Startseite },
            { path: '/einstellungen', component: Einstellungen },
            { path: '/spiel-einstellungen', component: Spieleinstellungen },
            { path: '/spiel', component: Spiel },
            { path: '/statistik', component: GlobaleStatistik },
            { path: '/regeln', component: Regeln }
        ];

        const router = createRouter({
            history: createWebHistory(),
            routes
        });

        // App erstellen
        const app = createApp({
            data() {
                return {
                    // Globale Daten hier...
                }
            },
            methods: {
                // Globale Methoden hier...
            },
            mounted() {
                // Initialisiere SoundManager
                SoundManager.init();
            }
        });

        app.use(router);
        app.mount('#app');
    </script>
</body>

</html>